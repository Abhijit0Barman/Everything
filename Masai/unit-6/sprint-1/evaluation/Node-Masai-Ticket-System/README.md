<h1 style="color:#18181a">
Masai Ticketing system
</h1>

<h2 style="color:#215dc8">
Maximum Marks: 11
</h2>

```
✅ Able to submit the application - 1 mark (minimum score)
✅ able to implement GET '/' route - 1 mark
✅ able to implement POST '/add/student' route - 2 mark
✅ able to implement POST '/add/instructor' route - 2 mark
✅ able to implement GET '/students' route - 1 mark
✅ able to implement GET '/instructors' route - 1 mark
✅ able to implement GET '/tickets' route - 1 mark
✅ able to implement GET '/address' route - 1 mark
✅ able to maintain the 'logs.txt' file as per the instructions - 1 mark
```

Initialize a backend project using the right command for it and create an express application for Masai Ticketing system with following API endpoints:

<p style="color:red">
Note: Get request test case for /students and /instructors will pass only after post route implementation
</p>

<h2 style="color:#215dc8">
1. /
</h2>

- `GET - /`
- This represents the `home route` of the server.
- If the client is hitting a request at this endpoint, there should be a response as `Welcome to the Home Page`.
- This response should be a `h1` heading type.
- You have to take care of this at backend itself.

<h5 style="color:#397ce7">Expected response should be of the form</h5>

```
<h1>Welcome to the Home Page</h1>
```

<h2 style="color:#215dc8">
2. /add/student
</h2>

- `POST /add/student`
- This route is responsible for `adding a new student` to the database in our case which is the `db.json` file.
- You can refer the data file to understand what are the fields required to add.

```
id => This is going to be the uid from os inbuilt module
name => This is going to be the username from os inbuilt module

Following things have to be taken from request body:

age => This can be any random age as per your choice
location => This can be any random location as per your choice
tickets => This is going to be the tickets generated by this particular user
    :ticket_id => This can be any random ticket number
    :title => This can be any random ticket title
    :body => This can be any random ticket body

tickets should be an array of objects means a tickets can contain one or more objects
```

<h5 style="color:#397ce7">The expected request should be of the form</h5>

```
{
      "age": 25,
      "location": "Rajasthan",
      "tickets": [
        {
          "ticket_id": "181",
          "title": "One Day Sick Leave",
          "body": "Due to fever i want to take one day leave"
        },
        {
          "ticket_id": "182",
          "title": "Two Day Sick Leave",
          "body": "Due to fever i want to take one day leave"
        }
      ]
}
```

<h5 style="color:#397ce7">Expected response should be of the form</h5>

```
[
   
    {
        "id": 1,                      ? uid from os module
        "name": "Shantilal",          ? username from os module
        "age": 25,
        "location": "Rajasthan",
        "tickets": [
            {
                "ticket_id": "181",
                "title": "One Day Sick Leave",
                "body": "Due to fever i want to take one day leave"
            },
            {
                "ticket_id": "182",
                "title": "Two Day Sick Leave",
                "body": "Due to fever i want to take one day leave"
            }
        ]
    }
]
```

- If there is some error

```
Send the complete err as response
```

- In case of no error, send complete students details as the response that should contain the newly added student as well.

<h2 style="color:#215dc8">
3. /add/instructor
</h2>

- `POST /add/instructor`
- This route is responsible for `adding a new instructor` to the database in our case which is the `db.json` file.
- You can refer the data file to understand what are the fields required to add.

```
id => This is going to be the uid from os inbuilt module
name => This is going to be the username from os inbuilt module

Following things have to be taken from request body:

age => This can be any random age as per your choice
location => This can be any random location as per your choice
sub => This can be any random subject of your choice
exp => This can be any random number depicting the years of experience
```

- Response should be all instructors array with newly added instructor

<h5 style="color:#397ce7">The expected request should be of the form</h5>

```
{
    "age": 26,
    "location": "Sanchore",
    "sub": "React Native",
    "exp": 1
}
```

<h5 style="color:#397ce7">Expected response should be of the form</h5>

```
[
    {
        "id": 1,                     ? uid from os module
        "name": "Chunnu",            ? username from os module
        "age": 45,
        "location": "Patna",
        "sub": "React",
        "exp": 10
    },
    {
        "id": -1,                    ? uid from os module                     
        "name": "Shantilal",         ? username from os module
        "age": 26,
        "location": "Sanchore",
        "sub": "React Native",
        "exp": 1
    }
]
```

- If there is some error

```
Send the complete err as response
```

- In case of no error, send complete instructors details as the response that should contain the newly added instructor as well.

<h2 style="color:#215dc8">
4. /students
</h2>

- `GET /students`
- This route is responsible for `getting all the students details`.
- In case of an error send the complete error as the response.
- In case everything works fine send the details of all the students as the response.


<h5 style="color:#397ce7">Expected response should be of the form</h5>

```
[
    {
        "id": 1,
        "name": "Aman",
        "age": 23,
        "location": "Pune",
        "tickets": [
            {
                "ticket_id": 1,
                "title": "LMS Issue",
                "body": "My LMS is not showing the lectures"
            },
            {
                "ticket_id": 2,
                "title": "Attendance",
                "body": "Even though I have attended the lecture, I am marked absent"
            }
        ]
    }
]
```

<h2 style="color:#215dc8">
5. /instructors
</h2>

- `GET /instructors`
- This route is responsible for `getting all the instructors details`.
- In case of an error send the complete error as the response.
- In case everything works fine send the details of all the instructors as the response.

<h5 style="color:#397ce7">Expected response should be of the form</h5>

```
[
    {
        "id": 1,
        "name": "Chunnu",
        "age": 45,
        "location": "Patna",
        "sub": "React",
        "exp": 10
    }
]
```

<h2 style="color:#215dc8">
6. /tickets
</h2>

- `GET /tickets`
- This route is responsible for `counting all the tickets` and providing the following response:

<h5 style="color:#397ce7">Expected response should be of the form</h5>
```
Total number of tickets in the system are 2
```

- Basically it will count all the tickets, for example if there are 2 students and they have created 2 tickets each so that total number of tickets are 4.
- In case of an error send the complete error as the response.

<h2 style="color:#215dc8">
7. /address
</h2>

- `GET /address`
- Once the client has made a request over here, you are supposed to handle the `ip address` and `family` of `masaischool.com`
- Hint: You can use inbuilt `DNS` module.

<h5 style="color:#397ce7">Expected response should be of the form</h5>

```
URL: masaischool.com IP Address: 13.235.220.57 Family: IPv4
```

- In case of an error, send the complete error as the response

<h2 style="color:#215dc8">
8. Logs Keeping
 </h2>

- You have to keep a log file which will maintain the record of every operation that has been performed

<h5 style="color:#397ce7">The content of the file will look something like the following:</h5>

```
The home route visited at Thu May 11 2023 15:32:58 GMT+0530 (India Standard Time)
New student has been added to the database at Thu May 11 2023 15:43:13 GMT+0530 (India Standard Time)
New instructor has been added to the database at Thu May 11 2023 16:33:19 GMT+0530 (India Standard Time)
All the students data provided at Thu May 11 2023 16:46:33 GMT+0530 (India Standard Time)
All the instructors data provided at Thu May 11 2023 17:33:46 GMT+0530 (India Standard Time)
Total number of tickets in the system are 3 at Thu May 11 2023 17:33:53 GMT+0530 (India Standard Time)
URL: masaischool.com IP Address: 13.235.220.57 Family: IPv4
```

- You can see for all the routes visited by the client, it is keeping track of the time stamp as well except the while getting the address, take care of this thing as well.

<h2 style="color:red">
All the readFile operations should be synchronous.
</h2>

<h2 style="color:red">
Important Points to keep in mind
</h2>

- You don't have to run the server (listen the server), you just have to export it at the end.
- You are not supposed to use `nodemon` as you are going to export the server.

```
module.exports = app
```

- In order to test the things locally you might need to run the server, but while testing on CP just comment out the `server.listen()` and just export the server.
- Should clean/delete the `logs.txt` each and every time before testing.
- should keep the `db.json` as it was in initial condition, which means we have to remove the added data and make the `db.json` as it was in initial state before testing.
- All the file operations are going to be synchronous, this point is very important.

Your solution should be well-organized and easy to understand, with clear and concise comments explaining the logic behind each step.

<h2 style="color:#215dc8">
Installation
</h2>

- Node version v16.16.0 is mandatory to use
- please make sure you do not push package-lock.json

```
npm install

// complete functions on index.js

// test locally
npm run test
```

<h2 style="color:#215dc8">
Requirements
</h2>

- The code should be written in Node.js.
- Use the built-in modules and external modules that are required.
- Add comments throughout your code to explain the logic behind each step

<h2 style="color:#215dc8">
Evaluation Criteria
</h2>

- Correct implementation of all the routes
- Proper handling of edge cases
- Code readability and organization
- Comments explaining the logic behind each step

<h2 style="color:#215dc8">
General guidelines
</h2>

- The system on cp.masaischool.com may take between 1-20 minutes for responding,
- so we request you to read the problem carefully and debug it before itself
- we also request you not just submit it last minute
- try to keep one submission at a time
